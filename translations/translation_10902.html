
    <style type="text/css">

    body {
    margin: 48px auto;
    max-width: 68ch;              /* character-based width reads better */
    padding: 0 16px;

    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
                Roboto, "Helvetica Neue", Arial, sans-serif;
    font-size: 18px;
    line-height: 1.65;
    color: #333;
    background: #fafafa;
    }

    h1, h2, h3, h4 {
    line-height: 1.25;
    margin-top: 2.2em;
    margin-bottom: 0.6em;
    font-weight: 600;
    }

    h1 {
    font-size: 2.1em;
    margin-top: 0;
    }

    h2 {
    font-size: 1.6em;
    border-bottom: 1px solid #e5e5e5;
    padding-bottom: 0.3em;
    }

    h3 {
    font-size: 1.25em;
    }

    h4 {
    font-size: 1.05em;
    color: #555;
    }

    /* Paragraphs and lists */
    p {
    margin: 1em 0;
    }

    ul, ol {
    margin: 1em 0 1em 1.5em;
    }

    li {
    margin: 0.4em 0;
    }

    a {
    color: #005fcc;
    text-decoration: none;
    }

    a:hover {
    text-decoration: underline;
    }

    code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size: 0.95em;
    background: #f2f2f2;
    padding: 0.15em 0.35em;
    border-radius: 4px;
    }

    pre {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size: 0.9em;
    background: #f5f5f5;
    padding: 1em 1.2em;
    overflow-x: auto;
    border-radius: 6px;
    line-height: 1.45;
    }

    pre code {
    background: none;
    padding: 0;
    }

    blockquote {
    margin: 1.5em 0;
    padding-left: 1em;
    border-left: 4px solid #ddd;
    color: #555;
    }

    hr {
    border: none;
    border-top: 1px solid #e0e0e0;
    margin: 3em 0;
    }

    table {
    border-collapse: collapse;
    margin: 1.5em 0;
    width: 100%;
    font-size: 0.95em;
    }

    th, td {
    padding: 0.5em 0.7em;
    border-bottom: 1px solid #e5e5e5;
    text-align: left;
    }

    th {
    font-weight: 600;
    }

    img {
    max-width: 100%;
    display: block;
    margin: 1.5em auto;
    }

    small {
    color: #666;
    }

    mjx-container {
    margin: 1em 0;
    }

    ::selection {
    background: #cce2ff;
    }

    </style>
    

<script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']],
    processEscapes: true,
    tags: 'ams'
  }
};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<h1><a href="https://kexue.fm/archives/10902">A Probability Inequality: Staring at it Until it Becomes Obviously True!</a></h1>

<p>By 苏剑林 | April 30, 2025</p>

<p>Two days ago, a member in a QQ group shared an inequality for proof:</p>

<blockquote>
<p>A probability-related inequality, from <i>"There is no fast single hashing algorithm"</i></p>
</blockquote>

<p>The concise problem statement, combined with the hint that it is "easily" checked, makes one feel that this is an obviously true result. However, the person who asked mentioned they had tried for a long time without success. So, what is the actual situation? Is it truly obviously true?</p>

<h2>Preliminary Attempt <a href="https://kexue.fm/kexue.fm#%E5%88%9D%E6%AD%A5%E5%B0%9D%E8%AF%95">#</a></h2>

<p>The problem is equivalent to proving
\begin{equation}\sum_{i=0}^j p^i \leq \sum_{i=0}^j \left(\log\frac{1}{1-p}\right)^i/i!,\qquad p\in[0, 1)\label{eq:q}\end{equation}
The given hint is
\begin{equation}\log\frac{1}{1-p} = \sum_{i=1}^{\infty} \frac{p^i}{i} = p + \frac{p^2}{2} + \frac{p^3}{3} + \cdots \label{eq:log-1-p}\end{equation}
This hint seems to guide us toward replacing $\log\frac{1}{1-p}$ on the right side of Eq. $\eqref{eq:q}$ and then expanding it into a power series in $p$ for term-by-term comparison. Since all coefficients in the expansion of $\log\frac{1}{1-p}$ are positive, every coefficient in the power series expansion of Eq. $\eqref{eq:q}$ must also be positive. Therefore, we only need to prove that the coefficients of the first $j$ terms are all greater than or equal to 1.</p>

<p>The logic seems sound, but expanding the $i$-th power of a power series back into a power series is a very tedious task, making it difficult to execute in practice. I tried several other approaches, such as setting $x=\log\frac{1}{1-p}$ to convert it into an inequality regarding $x$, which seemed promising but eventually got stuck and couldn't complete the full proof.</p>

<p>Thus, the initial attempt was declared a failure.</p>

<h2>Taylor Brute Force <a href="https://kexue.fm/kexue.fm#%E6%B3%B0%E5%8B%92%E7%A1%AC%E5%88%9A">#</a></h2>

<p>After going in circles, I returned to the starting point. After trying for half a day, it still felt like the most reliable path was expanding the right side of Eq. $\eqref{eq:q}$ into a power series. If direct exponentiation of Eq. $\eqref{eq:log-1-p}$ doesn't work, we must return to the original method of Taylor expansion: taking derivatives.</p>

<p>For simplicity, we define
\begin{equation}f_j(x) = \sum_{i=0}^j \frac{x^i}{i!}\end{equation}
The original problem is to prove
\begin{equation}f_j(x) \geq \sum_{i=0}^j p^i,\qquad x = \log\frac{1}{1-p}\end{equation}
We convert this to proving
\begin{equation}\left.\frac{d^k}{dp^k}f_j(x)\right|_{p=0} \,\,\geq\,\, \left\{\begin{aligned}&\, 1 \times k!,\,\, k \leq j \\[5pt]
&\,0,\,\, k > j\end{aligned}\right.\end{equation}
Note that when $j \geq 0$, $f_j(0)=1$, and when $j < 0$, we define $f_j(x)\equiv 0$. Since $f_j'(x)= f_{j-1}(x)$, we have:
\begin{gather}\frac{d}{dp}f_j(x) = f_{j-1}(x) \frac{1}{1-p} \\
\frac{d^2}{dp^2}f_j(x) = [f_{j-1}(x) + f_{j-2}(x)]\frac{1}{(1-p)^2} \\
\frac{d^3}{dp^3}f_j(x) = [2f_{j-1}(x) + 3f_{j-2}(x) + f_{j-3}(x)]\frac{1}{(1-p)^3} \\
\vdots \notag\\
\frac{d^k}{dp^k}f_j(x) = [\alpha_1 f_{j-1}(x) + \alpha_2 f_{j-2}(x) + \cdots + \alpha_k f_{j-k}(x)]\frac{1}{(1-p)^k} \\[8pt]
\frac{d^{k+1}}{dp^{k+1}}f_j(x) = \left[\begin{aligned}
\alpha_1 f_{j-2}(x) + \alpha_2 f_{j-3}(x) + \cdots + \alpha_k f_{j-k-1}(x) \\
+ k(\alpha_1 f_{j-1}(x) + \alpha_2 f_{j-2}(x) + \cdots + \alpha_k f_{j-k}(x))
\end{aligned}\right]\frac{1}{(1-p)^{k+1}}
\end{gather}
The pattern: $\frac{d^k}{dp^k}f_j(x)$ is the product of a linear combination of $f_{j-1}(x), f_{j-2}(x), \dots, f_{j-k}(x)$ and $\frac{1}{(1-p)^k}$. Notice we only care about the value of $\left.\frac{d^k}{dp^k}f_j(x)\right|_{p=0}$. After substituting $p=0$, it equals the sum of the non-zero coefficients of $f_{j-1}(0), f_{j-2}(0), \dots, f_{j-k}(0)$ (noting that $f_m(0)$ is either 1 or 0). Based on the derivative rules of $f_j(x)$, we can conclude that when $k \leq j$:
\begin{equation}\left.\frac{d^k}{dp^k}f_j(x)\right|_{p=0} = k \times \left.\frac{d^{k-1}}{dp^{k-1}}f_j(x)\right|_{p=0}\end{equation}
Thus $\left.\frac{d^k}{dp^k}f_j(x)\right|_{p=0} = k!$. According to the Taylor expansion, the coefficient of the $p^k$ term is $k!/k!=1$. When $k > j$, since $f_{j-k}(0)=0$ at that point, $\left.\frac{d^k}{dp^k}f_j(x)\right|_{p=0} < k!$, so the coefficient of $p^k$ is less than 1, yet still greater than zero. Therefore, the inequality is proven.</p>

<h2>Obviously True <a href="https://kexue.fm/kexue.fm#%E6%98%BE%E7%84%B6%E6%98%93%E5%BE%97">#</a></h2>

<p>In that case, the original problem wasn't as "obviously true" as the author claimed? I thought so too, until another group member provided an extremely simple perspective that made everything clear—this problem really is obviously true!</p>

<p>This perspective fully utilizes reverse thinking as follows:
\begin{equation}\begin{aligned}
\sum_{i=0}^j \left(\log\frac{1}{1-p}\right)^i/i! =&\, \sum_{i=0}^{\infty} \left(\log\frac{1}{1-p}\right)^i/i! - \sum_{i=j+1}^{\infty} \left(\log\frac{1}{1-p}\right)^i/i! \\
=&\, \exp\left(\log\frac{1}{1-p}\right) - \sum_{i=j+1}^{\infty} \left(\log\frac{1}{1-p}\right)^i/i! \\
=&\, \frac{1}{1-p} - \sum_{i=j+1}^{\infty} \left(\log\frac{1}{1-p}\right)^i/i! \\
=&\, \sum_{i=0}^{\infty} p^i - \sum_{i=j+1}^{\infty} \left(\log\frac{1}{1-p}\right)^i/i! \\
\end{aligned}\end{equation}
Note that $\log\frac{1}{1-p} \sim p$. Therefore, the trailing $\sum_{i=j+1}^{\infty}$ part only contributes to terms of $p^{j+1}$ and above. Thus, it becomes almost immediately obvious that the coefficients for the first $j+1$ terms of the expansion on the right side are all 1! The proof itself is not hard to understand; the truly difficult part is having the courage to extend the right-hand summation to infinity and noticing that the error term only contributes to $p^{j+1}$ and higher. This is classic reverse thinking.</p>

<p>Mathematics is truly wonderful~</p>
<hr>
<footer style="margin-top: 3em; padding: 1.5em; background: #f5f5f5; border-radius: 8px; font-size: 0.9em; color: #555;">
    <p style="margin: 0 0 0.5em 0;"><strong>Citation</strong></p>
    <p style="margin: 0 0 0.5em 0;">
        This is a machine translation of the original Chinese article:<br>
        <a href="translation_10902.html" style="color: #005fcc;">https://kexue.fm/archives/10902</a>
    </p>
    <p style="margin: 0 0 0.5em 0;">
        Original author: 苏剑林 (Su Jianlin)<br>
        Original publication: <a href="https://kexue.fm" style="color: #005fcc;">科学空间 (Scientific Spaces)</a>
    </p>
    <p style="margin: 0; font-style: italic;">
        Translated using Gemini 3 Flash. Please refer to the original for authoritative content.
    </p>
</footer>
