
    <style type="text/css">

    body {
    margin: 48px auto;
    max-width: 68ch;              /* character-based width reads better */
    padding: 0 16px;

    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
                Roboto, "Helvetica Neue", Arial, sans-serif;
    font-size: 18px;
    line-height: 1.65;
    color: #333;
    background: #fafafa;
    }

    h1, h2, h3, h4 {
    line-height: 1.25;
    margin-top: 2.2em;
    margin-bottom: 0.6em;
    font-weight: 600;
    }

    h1 {
    font-size: 2.1em;
    margin-top: 0;
    }

    h2 {
    font-size: 1.6em;
    border-bottom: 1px solid #e5e5e5;
    padding-bottom: 0.3em;
    }

    h3 {
    font-size: 1.25em;
    }

    h4 {
    font-size: 1.05em;
    color: #555;
    }

    /* Paragraphs and lists */
    p {
    margin: 1em 0;
    }

    ul, ol {
    margin: 1em 0 1em 1.5em;
    }

    li {
    margin: 0.4em 0;
    }

    a {
    color: #005fcc;
    text-decoration: none;
    }

    a:hover {
    text-decoration: underline;
    }

    code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size: 0.95em;
    background: #f2f2f2;
    padding: 0.15em 0.35em;
    border-radius: 4px;
    }

    pre {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size: 0.9em;
    background: #f5f5f5;
    padding: 1em 1.2em;
    overflow-x: auto;
    border-radius: 6px;
    line-height: 1.45;
    }

    pre code {
    background: none;
    padding: 0;
    }

    blockquote {
    margin: 1.5em 0;
    padding-left: 1em;
    border-left: 4px solid #ddd;
    color: #555;
    }

    hr {
    border: none;
    border-top: 1px solid #e0e0e0;
    margin: 3em 0;
    }

    table {
    border-collapse: collapse;
    margin: 1.5em 0;
    width: 100%;
    font-size: 0.95em;
    }

    th, td {
    padding: 0.5em 0.7em;
    border-bottom: 1px solid #e5e5e5;
    text-align: left;
    }

    th {
    font-weight: 600;
    }

    img {
    max-width: 100%;
    display: block;
    margin: 1.5em auto;
    }

    small {
    color: #666;
    }

    mjx-container {
    margin: 1em 0;
    }

    ::selection {
    background: #cce2ff;
    }

    </style>
    

<script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']],
    processEscapes: true,
    tags: 'ams',
    packages: {'[+]': ['ams']}
  },
  options: {
    renderActions: {
      findScript: [10, function (doc) {
        for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
          const display = !!node.type.match(/; *mode=display/);
          const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
          const text = document.createTextNode('');
          node.parentNode.replaceChild(text, node);
          math.start = {node: text, delim: '', n: 0};
          math.end = {node: text, delim: '', n: 0};
          doc.math.push(math);
        }
      }, '']
    }
  }
};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<article>
    <h1><a href="https://kexue.fm/archives/3477">Running Python Scripts on Your Phone on a Schedule</a></h1>

    <p>By 苏剑林 | Oct 21, 2015</p>

    <p>Without a doubt, data is the foundation of data analysis. For ordinary people like us, the most natural way to obtain large amounts of data is through web scraping. For me, the most straightforward way to write a crawler is using Python. In just a few lines of code, you can complete a practical crawler—it's very clean. (Please refer to: <a href="translation_3298.html">"Recording the Process of Crawling Taobao/Tmall Comment Data"</a>)</p>

    <h3 id="爬虫要住在哪里？">Where should the crawler reside? <a href="https://kexue.fm/archives/3477#%E7%88%AC%E8%99%AB%E8%A6%81%E4%BD%8F%E5%9C%A8%E5%93%AA%E9%87%8C%EF%BC%9F">#</a></h3>

    <p>The next question is, where should this crawler run? To crawl daily updated data, it often needs to run once a day, specifically at a certain scheduled time. In this case, it's not very realistic to keep it running on your own computer, as computers eventually need to be turned off. Some readers might think of using a cloud server; that is one method, but it involves additional costs. Inspired by the <a href="http://xiaoxia.org/">Great God Xiaoxia</a>, I started thinking about running it on a router. Some high-end routers allow external USB drives and can be flashed with the Open-Wrt system (a Linux-kernel router system that can install Python like a normal Linux). This was a very attractive approach to me, but I am not familiar with compilation in a Linux environment, especially operations under a router environment. Additionally, router configurations are quite low—usually only 16M flash and 64M RAM—and without patience, it can be hard to endure.</p>

    <p>I also thought about buying a Raspberry Pi for this. The current Raspberry Pi 2B already has 1GB of RAM, making it essentially a fully functional miniature PC, and it's not expensive, definitely worth playing with. However, putting aside the extra expense, if I bought a Raspberry Pi just to host a crawler, it seemed a bit wasteful. After considering various ideas, a thought suddenly popped up yesterday—besides laptops, the smart devices we use most often are mobile phones. Why not put it on a phone? Our phones are basically connected to Wi-Fi all day anyway, and while we sleep at night, the phone is essentially idle. Running collection on a phone seems to be the perfect fit!</p>

    <h3 id="艰难的摸索">A Difficult Exploration <a href="https://kexue.fm/archives/3477#%E8%89%B0%E9%9A%BE%E7%9A%84%E6%91%B8%E7%B4%A2">#</a></h3>

    <p>With the idea in hand, I got to work. Of course, the entire process of exploration was rather painful.</p>

    <p>First is the Python environment on the phone. This is simple because there is QPython available; it is a feature-rich Android Python environment that works right out of the box. There aren't many differences from PC Python, except for the inability to install many third-party libraries. Since the crawler needs to collect Chinese information, I chose QPython3. It is said that SL4A and PY4A are available, but they haven't been updated for a long time and the configuration is more complex, so I didn't bother trying them.</p>

    <p>Then comes writing the crawler. When writing the crawler, be careful to use the built-in libraries in QPython3. I used to use the <code>requests</code> library for writing crawlers, which is compatible with both 2.x and 3.x. However, QPython3 does not come with this library. Online tutorials usually teach us to use the <code>urllib2</code> library; in fact, this library only exists in 2.x and has been integrated into <code>urllib</code> in 3.x, so you need to change <code>urllib2</code> to <code>urllib.request</code>. More importantly, QPython3 includes the <code>re</code> library for regular expressions, which is essential for writing crawlers!! Also, QPython3 has the <code>csv</code> library, which is convenient for saving results. I won't provide the specific crawler code; please explore that yourself.</p>

    <p>Next comes the most difficult step: how to make the crawler run on a schedule on the phone??</p>

    <p>Yesterday and today, I looked up a lot of information and tried many methods, failing numerous times. Finally, I figured out a feasible method.</p>

    <blockquote>
        <p><strong>Terminal Emulator Settings</strong></p>
        <p>The first step is execution. Install "Terminal Emulator" (I don't know if there are other similar apps that can achieve this). This is an Android terminal emulator that allows our Android phone to have a terminal like Linux. Most importantly, in its "Settings," you can choose to start with root, and you can also customize the initial command line. In the initial command line field (the "Initial command" option in the right image), enter:<br />
        <code>/data/data/com.hipipal.qpy3/files/bin/qpython.sh <span style="color:red">/sdcard/com.hipipal.qpyplus/scripts3/582.py</span></code><br />
        The <span style="color:red">red part</span> is the crawler script we wrote. After filling it in, close the Terminal Emulator and reopen it. If you find that the specified crawler script runs automatically when you open the terminal, then you have succeeded.</p>
        <p>The second step is scheduling. You can install an app like "Schedule Master." There are many such apps; just pick one. As long as it supports running a specified app at a set time, we can create a scheduled task on it to run the Terminal Emulator.</p>
    </blockquote>

    <h3 id="总结">Conclusion <a href="https://kexue.fm/archives/3477#%E6%80%BB%E7%BB%93">#</a></h3>

    <p>Here is a screenshot of it running:</p>

    <p><img src="https://kexue.fm/usr/uploads/2015/10/2436798055.png" alt="Mobile crawler interface" title="Mobile crawler interface" /></p>

    <p>By now, we have completed writing a Python crawler on Android and setting up automated scheduled runs. In simple terms, we use QPython to run the Python script and then use an app like Schedule Master to run the app at a set time. How do we get QPython to execute our specific script? By specifying a startup command via the Terminal Emulator—this way, the Terminal Emulator becomes an app dedicated to running this crawler (of course, this seems a bit unfair to the Terminal Emulator, using a sledgehammer to crack a nut, but I couldn't think of a better way).</p>

    <p><em><strong>Reprinted at:</strong> <a href="translation_3477.html">https://kexue.fm/archives/3477</a></em></p>

    <p><em><strong>For more detailed reprinting matters, please refer to:</strong></em> <a href="https://kexue.fm/archives/6508#%E6%96%87%E7%AB%A0%E5%A6%82%E4%BD%95%E8%BD%AC%E8%BD%BD/%E5%BC%95%E7%94%A8">"Scientific Spaces FAQ"</a></p>

    <p>Su Jianlin. (Oct. 21, 2015). "Running Python Scripts on Your Phone on a Schedule" [Blog post]. Retrieved from <a href="translation_3477.html">https://kexue.fm/archives/3477</a></p>

    </article>
<hr>
<footer style="margin-top: 3em; padding: 1.5em; background: #f5f5f5; border-radius: 8px; font-size: 0.9em; color: #555;">
    <p style="margin: 0 0 0.5em 0;"><strong>Citation</strong></p>
    <p style="margin: 0 0 0.5em 0;">
        This is a machine translation of the original Chinese article:<br>
        <a href="translation_3477.html" style="color: #005fcc;">https://kexue.fm/archives/3477</a>
    </p>
    <p style="margin: 0 0 0.5em 0;">
        Original author: 苏剑林 (Su Jianlin)<br>
        Original publication: <a href="https://kexue.fm" style="color: #005fcc;">科学空间 (Scientific Spaces)</a>
    </p>
    <p style="margin: 0; font-style: italic;">
        Translated using Gemini 3 Flash. Please refer to the original for authoritative content.
    </p>
</footer>
