
    <style type="text/css">

    body {
    margin: 48px auto;
    max-width: 68ch;              /* character-based width reads better */
    padding: 0 16px;

    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
                Roboto, "Helvetica Neue", Arial, sans-serif;
    font-size: 18px;
    line-height: 1.65;
    color: #333;
    background: #fafafa;
    }

    h1, h2, h3, h4 {
    line-height: 1.25;
    margin-top: 2.2em;
    margin-bottom: 0.6em;
    font-weight: 600;
    }

    h1 {
    font-size: 2.1em;
    margin-top: 0;
    }

    h2 {
    font-size: 1.6em;
    border-bottom: 1px solid #e5e5e5;
    padding-bottom: 0.3em;
    }

    h3 {
    font-size: 1.25em;
    }

    h4 {
    font-size: 1.05em;
    color: #555;
    }

    /* Paragraphs and lists */
    p {
    margin: 1em 0;
    }

    ul, ol {
    margin: 1em 0 1em 1.5em;
    }

    li {
    margin: 0.4em 0;
    }

    a {
    color: #005fcc;
    text-decoration: none;
    }

    a:hover {
    text-decoration: underline;
    }

    code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size: 0.95em;
    background: #f2f2f2;
    padding: 0.15em 0.35em;
    border-radius: 4px;
    }

    pre {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size: 0.9em;
    background: #f5f5f5;
    padding: 1em 1.2em;
    overflow-x: auto;
    border-radius: 6px;
    line-height: 1.45;
    }

    pre code {
    background: none;
    padding: 0;
    }

    blockquote {
    margin: 1.5em 0;
    padding-left: 1em;
    border-left: 4px solid #ddd;
    color: #555;
    }

    hr {
    border: none;
    border-top: 1px solid #e0e0e0;
    margin: 3em 0;
    }

    table {
    border-collapse: collapse;
    margin: 1.5em 0;
    width: 100%;
    font-size: 0.95em;
    }

    th, td {
    padding: 0.5em 0.7em;
    border-bottom: 1px solid #e5e5e5;
    text-align: left;
    }

    th {
    font-weight: 600;
    }

    img {
    max-width: 100%;
    display: block;
    margin: 1.5em auto;
    }

    small {
    color: #666;
    }

    mjx-container {
    margin: 1em 0;
    }

    ::selection {
    background: #cce2ff;
    }

    </style>
    

<script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']],
    tags: 'ams',
    packages: {'[+]': ['ams']}
  }
};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<article>
    <nav style="margin-bottom: 1.5em;">
    <a href="../index.html" style="display: inline-flex; align-items: center; color: #555; text-decoration: none; font-size: 0.95em;">
        <span style="margin-right: 0.3em;">&larr;</span> Back to Index
    </a>
</nav>

    <h1><a href="https://kexue.fm/archives/4159">[Memo] Several Ideas for Interrupting Multiple Loops in Python</a></h1>
    <p>By 苏剑林 | December 19, 2016</p>

    <h2>Breaking Out of a Single Loop</h2>
    <p>Regardless of the programming language, there is often a need to break out of a loop—for example, when enumerating values and finding a number that satisfies a condition, you want to terminate. Breaking out of a single loop is very simple, for instance:</p>

<pre><code>for i in range(10):
    if i > 5:
        print i
        break
</code></pre>

    <p>However, we sometimes need to break out of multiple loops, while <code>break</code> can only exit one level of a loop. For example:</p>

<pre><code>for i in range(10):
    for j in range(10):
        if i+j > 5:
            print i,j
            break
</code></pre>

    <p>This code does not stop as soon as it finds a single set where $i+j > 5$; instead, it will find 10 such sets, because the <code>break</code> only exits the <code>for j in range(10)</code> loop level. So, how can we break out of multiple loops? This post serves as a memo for those methods.</p>

    <h2>Breaking Out of Multiple Loops</h2>
    <p>In fact, Python's standard syntax does not support breaking out of multiple loops directly. Therefore, one must rely on certain techniques. The general ideas include: wrapping the logic into a function, utilizing Cartesian products, or using a debugging/exception-based approach.</p>

    <h3>Wrapping in a Function</h3>
    <p>In Python, a function stops executing as soon as it reaches a <code>return</code> statement. One can take advantage of this characteristic by wrapping the functionality into a function to terminate multiple loops. For example:</p>

<pre><code>def work():
    for i in range(10):
        for j in range(10):
            if i+j > 5:
                return i,j

print work()
</code></pre>

    <h3>Utilizing Cartesian Product</h3>
    <p>The idea behind this method is that since we can break out of a single loop, we can rewrite multiple loops as a single loop. This can be achieved using the <code>product</code> function from <code>itertools</code> to create a Cartesian product. For example:</p>

<pre><code>from itertools import product

for i,j in product(range(10), range(10)):
    if i+j > 5:
        print i,j
        break
</code></pre>

    <h3>Utilizing Debugging Mode</h3>
    <p>The Cartesian product method is clever and concise, but it can only be used in cases where the collection in each loop iteration is independent. If each layer of the loop is closely related to the previous layer, this technique cannot be used. In such cases, you can use the first method (wrapping it in a function), or alternatively, utilize a debugging-style approach. This leverages the principle that an execution will exit whenever an error occurs, by "disguising" a custom exception as the trigger.</p>

<pre><code>class Found(Exception):
    pass

try:
    for i in range(10):
        for j in range(i): # The second loop is dependent on the first
            if i + j > 5:
                raise Found
except Found:
    print i, j
</code></pre>

    <hr />
    <p><strong>If you found this article helpful, you are welcome to share or tip this article. Tipping is not about making a profit, but is a way to see how much genuine attention Scientific Space has received from its readers. Of course, if you ignore it, it will not affect your reading. Thank you again for visiting!</strong></p>

    <p><strong>To cite this article, please refer to:</strong></p>
    <h3>You might also be interested in the following content:</h3>
    <ul>
        <li><a href="translation_9938.html">The unorthodox way to make Python retry code more elegant</a></li>
        <li><a href="translation_8662.html">Globally shuffling hundreds of gigabytes of files under limited memory (Python)</a></li>
        <li><a href="translation_7094.html">A brief introduction to 6 derived optimizers and their implementation</a></li>
        <li><a href="translation_7031.html">When can the speedup of multi-processing be greater than 1?</a></li>
        <li><a href="translation_5597.html">An NLP library based on the principle of minimum entropy: nlp zero</a></li>
        <li><a href="translation_5525.html">Implementing an efficient Apriori algorithm with Numpy</a></li>
        <li><a href="translation_4797.html">Enhancing the search functionality of typecho</a></li>
        <li><a href="translation_4231.html">Multi-process programming techniques in Python</a></li>
        <li><a href="translation_4118.html">Sentiment analysis from a perspective based on bidirectional GRU and language models</a></li>
        <li><a href="translation_4100.html">Three visits to shred restoration: Shred restoration based on CNN</a></li>
    </ul>
</article>
<hr>
<footer style="margin-top: 3em; padding: 1.5em; background: #f5f5f5; border-radius: 8px; font-size: 0.9em; color: #555;">
    <p style="margin: 0 0 0.5em 0;"><strong>Citation</strong></p>
    <p style="margin: 0 0 0.5em 0;">
        This is a machine translation of the original Chinese article:<br>
        <a href="https://kexue.fm/archives/4159" style="color: #005fcc;">https://kexue.fm/archives/4159</a>
    </p>
    <p style="margin: 0 0 0.5em 0;">
        Original author: 苏剑林 (Su Jianlin)<br>
        Original publication: <a href="https://kexue.fm" style="color: #005fcc;">科学空间 (Scientific Spaces)</a>
    </p>
    <p style="margin: 0; font-style: italic;">
        Translated using Gemini 3 Flash. Please refer to the original for authoritative content.
    </p>
</footer>
