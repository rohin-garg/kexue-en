
    <style type="text/css">

    body {
    margin: 48px auto;
    max-width: 68ch;              /* character-based width reads better */
    padding: 0 16px;

    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
                Roboto, "Helvetica Neue", Arial, sans-serif;
    font-size: 18px;
    line-height: 1.65;
    color: #333;
    background: #fafafa;
    }

    h1, h2, h3, h4 {
    line-height: 1.25;
    margin-top: 2.2em;
    margin-bottom: 0.6em;
    font-weight: 600;
    }

    h1 {
    font-size: 2.1em;
    margin-top: 0;
    }

    h2 {
    font-size: 1.6em;
    border-bottom: 1px solid #e5e5e5;
    padding-bottom: 0.3em;
    }

    h3 {
    font-size: 1.25em;
    }

    h4 {
    font-size: 1.05em;
    color: #555;
    }

    /* Paragraphs and lists */
    p {
    margin: 1em 0;
    }

    ul, ol {
    margin: 1em 0 1em 1.5em;
    }

    li {
    margin: 0.4em 0;
    }

    a {
    color: #005fcc;
    text-decoration: none;
    }

    a:hover {
    text-decoration: underline;
    }

    code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size: 0.95em;
    background: #f2f2f2;
    padding: 0.15em 0.35em;
    border-radius: 4px;
    }

    pre {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size: 0.9em;
    background: #f5f5f5;
    padding: 1em 1.2em;
    overflow-x: auto;
    border-radius: 6px;
    line-height: 1.45;
    }

    pre code {
    background: none;
    padding: 0;
    }

    blockquote {
    margin: 1.5em 0;
    padding-left: 1em;
    border-left: 4px solid #ddd;
    color: #555;
    }

    hr {
    border: none;
    border-top: 1px solid #e0e0e0;
    margin: 3em 0;
    }

    table {
    border-collapse: collapse;
    margin: 1.5em 0;
    width: 100%;
    font-size: 0.95em;
    }

    th, td {
    padding: 0.5em 0.7em;
    border-bottom: 1px solid #e5e5e5;
    text-align: left;
    }

    th {
    font-weight: 600;
    }

    img {
    max-width: 100%;
    display: block;
    margin: 1.5em auto;
    }

    small {
    color: #666;
    }

    mjx-container {
    margin: 1em 0;
    }

    ::selection {
    background: #cce2ff;
    }

    </style>
    

<script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']],
    tags: 'ams',
    packages: {'[+]': ['ams']}
  },
  options: {
    renderActions: {
      findScript: [10, function (doc) {
        for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
          const display = !!node.type.match(/; *mode=display/);
          const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
          const text = document.createTextNode('');
          node.parentNode.replaceChild(text, node);
          math.start = {node: text, delim: '', n: 0};
          math.end = {node: text, delim: '', n: 0};
          doc.math.push(math);
        }
      }, '']
    }
  }
};
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<h1><a href="https://kexue.fm/archives/4503">Based on Xception for Tencent Captcha Recognition (Samples + Code)</a></h1>

<p>By 苏剑林 | July 24, 2017</p>

<p>Last year, I was fortunate enough to receive a batch of Tencent captcha samples from a netizen. Consequently, I conducted some research on them, the process of which was documented in <a href="translation_4138.html">"End-to-End Tencent Captcha Recognition (46% Accuracy)"</a>.</p>

<p>Later, that article attracted considerable interest from readers, with some requesting samples, others asking for the model, and many engaging in discussions, which was quite unexpected. In fact, the original model was relatively crude, especially since its accuracy was not high enough for practical use, offering limited reference value. Over the past few days, I revisited this and developed a model with higher accuracy; simultaneously, I am making the samples public for everyone.</p>

<p>The reasoning behind the model remains the same as in <a href="translation_4138.html">"End-to-End Tencent Captcha Recognition (46% Accuracy)"</a>, except the CNN component has been replaced with the standard Xception architecture. Of course, readers could also experiment with VGG, ResNet50, etc.; in fact, for captcha recognition, these models are all quite capable. I chose Xception because it has fewer layers and smaller model weights, which I personally prefer.</p>

<h2 id="代码">Code <a href="https://kexue.fm/archives/4503#%E4%BB%A3%E7%A0%81">#</a></h2>

<p>Github: <a href="https://github.com/bojone/n2n-ocr-for-qqcaptcha/blob/master/qqcaptcha-with-xception.py">https://github.com/bojone/n2n-ocr-for-qqcaptcha/</a></p>

<pre><code class="language-python"># (The code block from the original post is placed here)
</code></pre>

<p>It is worth noting that the pre-trained weights for Xception are intended for ImageNet image classification tasks, which are clearly not applicable to captcha recognition. Therefore, all layers have been unfrozen for training here, rather than fixing most weights as is standard for general classification tasks.</p>

<h2 id="结果">Results <a href="https://kexue.fm/archives/4503#%E7%BB%93%E6%9E%9C">#</a></h2>

<p>After training with the code mentioned above, the recognition rate of the model on the test set (where all four characters must be correct to be counted as a correct prediction) can reach over 85%. With finer hyperparameter tuning (considering adjustments to the learning rate, increasing/decreasing iterations, adjusting model architecture, etc.), it can reach over 90%.</p>

<p>Additionally, you may refer to the masterpiece by the great Yang Peiwen, which uses CTC for final classification: <a href="https://zhuanlan.zhihu.com/p/26078299">"Using Deep Learning to Crack Captchas"</a>.</p>

<h2 id="资源">Resources <a href="https://kexue.fm/archives/4503#%E8%B3%87%E6%BA%90">#</a></h2>

<p>The 100,000 captcha samples are publicly available below:</p>

<blockquote>
    Link: <a href="https://pan.baidu.com/s/1mhO1sG4">https://pan.baidu.com/s/1mhO1sG4</a> Password: j2rj
</blockquote>

<p><em><strong>Reprinting Note: Please include the original article address:</strong> <a href="translation_4503.html">https://kexue.fm/archives/4503</a> ("Based on Xception for Tencent Captcha Recognition (Samples + Code)")</em></p>

<p><em><strong>For more detailed reprinting matters, please refer to:</strong></em> <a href="https://kexue.fm/archives/6508#%E6%96%87%E7%AB%A0%E5%A6%82%E4%BD%95%E8%BD%AC%E8%BD%BD/%E5%BC%95%E7%94%A8">"Scientific Spaces FAQ"</a></p>

<p><strong>If you have any doubts or suggestions, feel free to continue the discussion in the comments section below.</strong></p>

<p><strong>If you found this article helpful, you are welcome to <a href="https://kexue.fm/archives/4503#share">share</a> or <a href="https://kexue.fm/archives/4503#pay">reward</a> this article. Rewards are not for profit, but to know how much sincere attention Scientific Spaces has received from readers. Of course, if you ignore it, it will not affect your reading. Thank you again for your visit and support!</strong></p>

<p>Su Jianlin. (Jul. 24, 2017). "Based on Xception for Tencent Captcha Recognition (Samples + Code)" [Blog post]. Retrieved from <a href="translation_4503.html">https://kexue.fm/archives/4503</a></p>

<hr>
<footer style="margin-top: 3em; padding: 1.5em; background: #f5f5f5; border-radius: 8px; font-size: 0.9em; color: #555;">
    <p style="margin: 0 0 0.5em 0;"><strong>Citation</strong></p>
    <p style="margin: 0 0 0.5em 0;">
        This is a machine translation of the original Chinese article:<br>
        <a href="translation_4503.html" style="color: #005fcc;">https://kexue.fm/archives/4503</a>
    </p>
    <p style="margin: 0 0 0.5em 0;">
        Original author: 苏剑林 (Su Jianlin)<br>
        Original publication: <a href="https://kexue.fm" style="color: #005fcc;">科学空间 (Scientific Spaces)</a>
    </p>
    <p style="margin: 0; font-style: italic;">
        Translated using Gemini 3 Flash. Please refer to the original for authoritative content.
    </p>
</footer>
