## SEARCH

## MENU

- [打赏](https://kexue.fm/reward.html)
- [公式](https://kexue.fm/latex.html)
- [天象](https://kexue.fm/ac.html)
- [链接](https://kexue.fm/links.html)
- [时光](https://kexue.fm/me.html)
- [博览](https://kexue.fm/science.html)
- [归档](https://kexue.fm/content.html)

## CATEGORIES

- [千奇百怪](https://kexue.fm/category/Everything)
- [天文探索](https://kexue.fm/category/Astronomy)
- [数学研究](https://kexue.fm/category/Mathematics)
- [物理化学](https://kexue.fm/category/Phy-chem)
- [信息时代](https://kexue.fm/category/Big-Data)
- [生物自然](https://kexue.fm/category/Biology)
- [图片摄影](https://kexue.fm/category/Photograph)
- [问题百科](https://kexue.fm/category/Questions)
- [生活/情感](https://kexue.fm/category/Life-Feeling)
- [资源共享](https://kexue.fm/category/Resources)

## NEWPOSTS

- [通过msign来计算mclip（奇...](https://kexue.fm/archives/11006)
- [msign算子的Newton-Sc...](https://kexue.fm/archives/10996)
- [等值振荡定理：最优多项式逼近的充要条件](https://kexue.fm/archives/10972)
- [生成扩散模型漫谈（三十）：从瞬时速...](https://kexue.fm/archives/10958)
- [MoE环游记：5、均匀分布的反思](https://kexue.fm/archives/10945)
- [msign算子的Newton-Sc...](https://kexue.fm/archives/10922)
- [Transformer升级之路：2...](https://kexue.fm/archives/10907)
- [一道概率不等式：盯着它到显然成立为止！](https://kexue.fm/archives/10902)
- [SVD的导数](https://kexue.fm/archives/10878)
- [智能家居之手搓一套能接入米家的零冷水装置](https://kexue.fm/archives/10869)

## COMMENTS

- [PengchengMa: 牛啊](https://kexue.fm/archives/10996/comment-page-1#comment-27811)
- [xczh: 已使用mean flow policy，一步推理效果确实惊人，...](https://kexue.fm/archives/10958/comment-page-1#comment-27810)
- [Cosine: 是不是因为shared experts每次都激活，而route...](https://kexue.fm/archives/10945/comment-page-1#comment-27809)
- [rpsun: 这样似乎与传统的经验正交函数之类的有相似之处。把样本的平均值减...](https://kexue.fm/archives/10699/comment-page-1#comment-27808)
- [贵阳机场接机: 怎么不更新啦](https://kexue.fm/archives/1490/comment-page-1#comment-27807)
- [czvzb: 具身智能模型目前主流也是在使用扩散和流匹配这类方法来预测动作。...](https://kexue.fm/archives/10958/comment-page-1#comment-27806)
- [Shawn\_yang: 苏神，关于您所说的：“推理阶段可以事先预估Routed Exp...](https://kexue.fm/archives/10945/comment-page-1#comment-27802)
- [OceanYU: 您好，关于由式（7）推导出高斯分布，我这里有一点问题，式（7）...](https://kexue.fm/archives/9164/comment-page-4#comment-27801)
- [jorjiang: 训练和prefill这个compute-bound阶段不做矩阵...](https://kexue.fm/archives/10907/comment-page-2#comment-27800)
- [amy: 苏老师，您有关注傅里叶旋转位置编码这篇工作吗，想知道您对这篇工...](https://kexue.fm/archives/10907/comment-page-2#comment-27799)

## USERLOGIN

- [登录](https://kexue.fm/admin/login.php)

[科学空间\|Scientific Spaces](https://kexue.fm)

- [登录](https://kexue.fm/admin/login.php)
- [打赏](https://kexue.fm/reward.html)
- [公式](https://kexue.fm/latex.html)
- [天象](https://kexue.fm/ac.html)
- [链接](https://kexue.fm/links.html)
- [时光](https://kexue.fm/me.html)
- [博览](https://kexue.fm/science.html)
- [归档](https://kexue.fm/content.html)

渴望成为一个小飞侠

- [欢迎订阅](https://kexue.fm/feed)
- [个性邮箱](https://kexue.fm/archives/119)
- [天象信息](https://kexue.fm/ac.html)
- [观测ISS](https://kexue.fm/archives/41)
- [LaTeX](https://kexue.fm/latex.html)
- [关于博主](https://kexue.fm/me.html)

欢迎访问“科学空间”，这里将与您共同探讨自然科学，回味人生百态；也期待大家的分享～

- [**千奇百怪** Everything](https://kexue.fm/category/Everything)
- [**天文探索** Astronomy](https://kexue.fm/category/Astronomy)
- [**数学研究** Mathematics](https://kexue.fm/category/Mathematics)
- [**物理化学** Phy-chem](https://kexue.fm/category/Phy-chem)
- [**信息时代** Big-Data](https://kexue.fm/category/Big-Data)
- [**生物自然** Biology](https://kexue.fm/category/Biology)
- [**图片摄影** Photograph](https://kexue.fm/category/Photograph)
- [**问题百科** Questions](https://kexue.fm/category/Questions)
- [**生活/情感** Life-Feeling](https://kexue.fm/category/Life-Feeling)
- [**资源共享** Resources](https://kexue.fm/category/Resources)

- [**千奇百怪**](https://kexue.fm/category/Everything)
- [**天文探索**](https://kexue.fm/category/Astronomy)
- [**数学研究**](https://kexue.fm/category/Mathematics)
- [**物理化学**](https://kexue.fm/category/Phy-chem)
- [**信息时代**](https://kexue.fm/category/Big-Data)
- [**生物自然**](https://kexue.fm/category/Biology)
- [**图片摄影**](https://kexue.fm/category/Photograph)
- [**问题百科**](https://kexue.fm/category/Questions)
- [**生活/情感**](https://kexue.fm/category/Life-Feeling)
- [**资源共享**](https://kexue.fm/category/Resources)

[首页](https://kexue.fm) [数学研究](https://kexue.fm/category/Mathematics) 局部余弦相似度大，全局余弦相似度一定也大吗？

9Jan

# [局部余弦相似度大，全局余弦相似度一定也大吗？](https://kexue.fm/archives/9931)

By 苏剑林 \|
2024-01-09 \|
42026位读者\|

在分析模型的参数时，有些情况下我们会将模型的所有参数当成一个整体的向量，有些情况下我们则会将不同的参数拆开来看。比如，一个7B大小的LLAMA模型所拥有的70亿参数量，有时候我们会将它当成“一个70亿维的向量”，有时候我们会按照模型的实现方式将它看成“数百个不同维度的向量”，最极端的情况下，我们也会将它看成是“七十亿个1维向量”。既然有不同的看待方式，那么当我们要算一些统计指标时，也就会有不同的计算方式，即局部计算和全局计算，这引出了局部计算的指标与全局计算的指标有何关联的问题。

本文我们关心两个向量的余弦相似度。如果两个大向量的维度被拆成了若干组，同一组对应的子向量余弦相似度都很大，那么两个大向量的余弦相似度是否一定就大呢？答案是否定的。特别地，这还跟著名的“辛普森悖论”有关。

## 问题背景 [\#](https://kexue.fm/archives/9931\#%E9%97%AE%E9%A2%98%E8%83%8C%E6%99%AF)

这个问题源于笔者对优化器的参数增量导致的损失函数变化量的分析。具体来说，假设优化器的更新规则是：
\\begin{equation}\\boldsymbol{\\theta}\_{t+1} = \\boldsymbol{\\theta}\_t - \\eta\_t \\boldsymbol{u}\_t\\end{equation}
其中$\\boldsymbol{u}\_t$是某个指定更新方向（的负方向）的向量。此时泰勒展开到一阶有
\\begin{equation}\\mathcal{L}(\\boldsymbol{\\theta}\_{t+1}) = \\mathcal{L}(\\boldsymbol{\\theta}\_t - \\eta\_t \\boldsymbol{u}\_t)\\approx \\mathcal{L}(\\boldsymbol{\\theta}\_t) - \\eta\_t \\langle\\boldsymbol{u}\_t,\\boldsymbol{g}\_t\\rangle\\end{equation}
这里的$\\boldsymbol{g}\_t$就是梯度$\\nabla\_{\\boldsymbol{\\theta}\_t}\\mathcal{L}(\\boldsymbol{\\theta}\_t)$，所以说，损失函数的变化量近似为
\\begin{equation}- \\eta\_t \\langle\\boldsymbol{u}\_t,\\boldsymbol{g}\_t\\rangle = - \\eta\_t \\Vert\\boldsymbol{u}\_t\\Vert \\Vert\\boldsymbol{g}\_t\\Vert \\cos(\\boldsymbol{u}\_t,\\boldsymbol{g}\_t)\\end{equation}
所以笔者想到了观察一下$\\boldsymbol{u}\_t$与$\\boldsymbol{g}\_t$的余弦相似度，即更新向量与梯度的方向一致性。

但问题来了，正如本文开头所说，模型的参数有不同的拆分方式，我们是将模型所有参数当成一个大向量来算更新向量与梯度的余弦（全局），还是每一层、每个参数单独来算（局部）？笔者两者都做了，并且对局部余弦做了截断（保证每个参数对应的更新向量与梯度的余弦大于某个正阈值），然后发现全局居然小于该阈值。初见之下感觉比较意外，于是简单分析了一番。

## 简单分析 [\#](https://kexue.fm/archives/9931\#%E7%AE%80%E5%8D%95%E5%88%86%E6%9E%90)

现在问题抽象为：

> 假如两个向量的局部余弦相似度都不小于$\\lambda > 0$，那么这两个向量的全局余弦相似度一定不小于$\\lambda$吗？

答案大家已经知道了，是否定的。否定只需要举一个反例，假设$\\boldsymbol{x}=(1,1),\\boldsymbol{y}=(1,2)$，很明显$\\boldsymbol{x}\\neq\\boldsymbol{y}$，所以$\\cos(\\boldsymbol{x},\\boldsymbol{y})\\neq 1$，但是它们的子向量——也就是每个分量——都是正数，正数作为一维向量，它们的余弦相似度都是1，所以我们就得到了一个局部余弦相似度全是1、全局相似度小于1的反例。

更一般的分析，我们可以设$\\boldsymbol{x}=\[\\boldsymbol{x}\_1,\\boldsymbol{x}\_2\],\\boldsymbol{y}=\[\\boldsymbol{y}\_1,\\boldsymbol{y}\_2\]$，那么
\\begin{equation}\\begin{aligned}
\\cos(\\boldsymbol{x},\\boldsymbol{y}) =&\\, \\frac{\\langle \\boldsymbol{x}, \\boldsymbol{y}\\rangle}{\\Vert\\boldsymbol{x}\\Vert \\Vert\\boldsymbol{y}\\Vert}
= \\frac{\\langle \\boldsymbol{x}\_1, \\boldsymbol{y}\_1\\rangle + \\langle \\boldsymbol{x}\_2, \\boldsymbol{y}\_2\\rangle}{\\sqrt{\\Vert\\boldsymbol{x}\_1\\Vert^2 + \\Vert\\boldsymbol{x}\_2\\Vert^2} \\sqrt{\\Vert\\boldsymbol{y}\_1\\Vert^2 + \\Vert\\boldsymbol{y}\_2\\Vert^2}} \\\\[6pt\]
=&\\,\\frac{\\cos(\\boldsymbol{x}\_1, \\boldsymbol{y}\_1) \\Vert\\boldsymbol{x}\_1\\Vert \\Vert\\boldsymbol{y}\_1\\Vert+ \\cos(\\boldsymbol{x}\_2, \\boldsymbol{y}\_2)\\Vert\\boldsymbol{x}\_2\\Vert \\Vert\\boldsymbol{y}\_2\\Vert}{\\sqrt{\\Vert\\boldsymbol{x}\_1\\Vert^2 + \\Vert\\boldsymbol{x}\_2\\Vert^2} \\sqrt{\\Vert\\boldsymbol{y}\_1\\Vert^2 + \\Vert\\boldsymbol{y}\_2\\Vert^2}}
\\end{aligned}\\label{eq:cos}\\end{equation}
如果让$\\Vert\\boldsymbol{x}\_1\\Vert,\\Vert\\boldsymbol{y}\_2\\Vert\\to 0$，$\\Vert\\boldsymbol{x}\_2\\Vert,\\Vert\\boldsymbol{y}\_1\\Vert$保持大于零不动（不失一般性，可以设$\\Vert\\boldsymbol{x}\_2\\Vert=\\Vert\\boldsymbol{y}\_1\\Vert=1$），那么可以得到$\\cos(\\boldsymbol{x},\\boldsymbol{y})\\to 0$，那就是说，不管$\\cos(\\boldsymbol{x}\_1,\\boldsymbol{y}\_1)$和$\\cos(\\boldsymbol{x}\_2,\\boldsymbol{y}\_2)$多大，总有一种情况可以让$\\cos(\\boldsymbol{x},\\boldsymbol{y})$无限接近于0，即无法通过$\\cos(\\boldsymbol{x}\_1,\\boldsymbol{y}\_1)$和$\\cos(\\boldsymbol{x}\_2,\\boldsymbol{y}\_2)$来让$\\cos(\\boldsymbol{x},\\boldsymbol{y})$有下界。

至于上界，则可以证明：
\\begin{equation}\\cos(\\boldsymbol{x},\\boldsymbol{y})\\leq \\max\\big\\{\\cos(\\boldsymbol{x}\_1,\\boldsymbol{y}\_1),\\cos(\\boldsymbol{x}\_2,\\boldsymbol{y}\_2)\\big\\}\\label{eq:cos-ul}\\end{equation}
证明其实也很简单，因为这个界很松。不失一般性假设$\\cos(\\boldsymbol{x}\_1,\\boldsymbol{y}\_1)\\leq\\cos(\\boldsymbol{x}\_2,\\boldsymbol{y}\_2)$，那么根据式$\\eqref{eq:cos}$有
\\begin{equation}
\\cos(\\boldsymbol{x},\\boldsymbol{y}) \\leq\\left\[\\frac{\\Vert\\boldsymbol{x}\_1\\Vert \\Vert\\boldsymbol{y}\_1\\Vert+ \\Vert\\boldsymbol{x}\_2\\Vert \\Vert\\boldsymbol{y}\_2\\Vert}{\\sqrt{\\Vert\\boldsymbol{x}\_1\\Vert^2 + \\Vert\\boldsymbol{x}\_2\\Vert^2} \\sqrt{\\Vert\\boldsymbol{y}\_1\\Vert^2 + \\Vert\\boldsymbol{y}\_2\\Vert^2}}\\right\]\\cos(\\boldsymbol{x}\_2, \\boldsymbol{y}\_2)
\\end{equation}
方括号部分，其实正好是二维向量$(\\Vert\\boldsymbol{x}\_1\\Vert,\\Vert\\boldsymbol{x}\_2\\Vert)$和$(\\Vert\\boldsymbol{y}\_1\\Vert,\\Vert\\boldsymbol{y}\_2\\Vert)$的余弦相似度，所以它必然不大于1，于是有$\\cos(\\boldsymbol{x},\\boldsymbol{y})\\leq\\cos(\\boldsymbol{x}\_2,\\boldsymbol{y}\_2)$，这就证明了不等式$\\eqref{eq:cos-ul}$。

（再次强调，以上证明都是在$\\cos(\\boldsymbol{x}\_1,\\boldsymbol{y}\_1)\\geq 0,\\cos(\\boldsymbol{x}\_2,\\boldsymbol{y}\_2) \\geq 0$的假设下完成的，如果存在小于0的情况，则结论可能需要稍加改动。）

## 相关悖论 [\#](https://kexue.fm/archives/9931\#%E7%9B%B8%E5%85%B3%E6%82%96%E8%AE%BA)

以上结果有什么更现实的对应吗？有，将它放到相关性分析中，就引申出了著名的“ [辛普森悖论（Simpson's paradox）](https://en.wikipedia.org/wiki/Simpson%27s_paradox)”。

我们知道，有个衡量线性相关性的系数叫做“皮尔逊系数（Pearson Coefficient）”，定义为
\\begin{equation}r = \\frac{\\sum\\limits\_{i=1}^n (x\_i-\\bar{x})(y\_i - \\bar{y})}{\\sqrt{\\sum\\limits\_{i=1}^n (x\_i-\\bar{x})^2}\\sqrt{\\sum\\limits\_{i=1}^n(y\_i - \\bar{y})^2}}\\end{equation}
再认真观察一下，如果我们记$\\boldsymbol{x} = (x\_1,x\_2,\\cdots,x\_n),\\boldsymbol{y} = (y\_1,y\_2,\\cdots,y\_n)$，那么上式不就是
\\begin{equation}r = \\cos(\\boldsymbol{x}-\\bar{x},\\boldsymbol{y}-\\bar{y})\\end{equation}
所以，皮尔逊相关系数其实就是数据点减去均值之后的余弦相似度。既然有了余弦相似度，那么上一节的结果就能用过来了，直接结论就是即便两批数据都是明显的线性相关（$\\cos > 0$），合起来之后也可能是线性无关的（$\\cos \\to 0$）。

而“辛普森悖论”说的更彻底一些，说的是每一批数据都是正相关，合起来不仅可能是线性无关，还可能是负相关，这是因为相关系数相比单纯的余弦相似度多了个$\\bar{x},\\bar{y}$参数，可调的自由度更大。几何图像也非常直观，比如下图：

“辛普森悖论”直观图像

上图中，蓝色数据完全在同一条直线上，而且斜率为正，所以相关系数为1，红色数据也是如此，它们在自己的批次内都是“完全正线性相关”。但是将数据合起来后，如果非要用一条直线拟合，那么只能是虚线，而且斜率为负，即变成了负相关。这就构成了“辛普森悖论”的一个经典例子。

## 文章小结 [\#](https://kexue.fm/archives/9931\#%E6%96%87%E7%AB%A0%E5%B0%8F%E7%BB%93)

本文简单讨论了高维向量的局部余弦相似度与全局余弦相似度之间的关系，并进一步讨论了与之相关的“辛普森悖论”。

_**转载到请包括本文地址：** [https://kexue.fm/archives/9931](https://kexue.fm/archives/9931)_

_**更详细的转载事宜请参考：**_ [《科学空间FAQ》](https://kexue.fm/archives/6508#%E6%96%87%E7%AB%A0%E5%A6%82%E4%BD%95%E8%BD%AC%E8%BD%BD/%E5%BC%95%E7%94%A8)

**如果您还有什么疑惑或建议，欢迎在下方评论区继续讨论。**

**如果您觉得本文还不错，欢迎 [分享](https://kexue.fm/archives/9931#share)/ [打赏](https://kexue.fm/archives/9931#pay) 本文。打赏并非要从中获得收益，而是希望知道科学空间获得了多少读者的真心关注。当然，如果你无视它，也不会影响你的阅读。再次表示欢迎和感谢！**

打赏

微信打赏

支付宝打赏

因为网站后台对打赏并无记录，因此欢迎在打赏时候备注留言。你还可以 [**点击这里**](http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=tN7d1drY3drrx8H0xcWa19vZ) 或在下方评论区留言来告知你的建议或需求。

**如果您需要引用本文，请参考：**

苏剑林. (Jan. 09, 2024). 《局部余弦相似度大，全局余弦相似度一定也大吗？ 》\[Blog post\]. Retrieved from [https://kexue.fm/archives/9931](https://kexue.fm/archives/9931)

@online{kexuefm-9931,
        title={局部余弦相似度大，全局余弦相似度一定也大吗？},
        author={苏剑林},
        year={2024},
        month={Jan},
        url={\\url{https://kexue.fm/archives/9931}},
}

分类： [数学研究](https://kexue.fm/category/Mathematics)    标签： [不等式](https://kexue.fm/tag/%E4%B8%8D%E7%AD%89%E5%BC%8F/), [相似度](https://kexue.fm/tag/%E7%9B%B8%E4%BC%BC%E5%BA%A6/), [悖论](https://kexue.fm/tag/%E6%82%96%E8%AE%BA/)[7 评论](https://kexue.fm/archives/9931#comments)

< [新年快乐！记录一下 Cool Papers 的开发体验](https://kexue.fm/archives/9920) \| [旁门左道之如何让Python的重试代码更加优雅](https://kexue.fm/archives/9938) >

### 你也许还对下面的内容感兴趣

- [一道概率不等式：盯着它到显然成立为止！](https://kexue.fm/archives/10902)
- [Transformer升级之路：18、RoPE的底数选择原则](https://kexue.fm/archives/10122)
- [让炼丹更科学一些（一）：SGD的平均损失收敛](https://kexue.fm/archives/9902)
- [logsumexp运算的几个不等式](https://kexue.fm/archives/9070)
- [Seq2Seq+前缀树：检索任务新范式（以KgCLUE为例）](https://kexue.fm/archives/8802)
- [输入梯度惩罚与参数梯度惩罚的一个不等式](https://kexue.fm/archives/8796)
- [从三角不等式到Margin Softmax](https://kexue.fm/archives/8656)
- [基于GRU和AM-Softmax的句子相似度模型](https://kexue.fm/archives/5743)
- [积分估计的极值原理——变分原理的初级版本](https://kexue.fm/archives/3630)
- [有趣的求极限题：随心所欲的放缩](https://kexue.fm/archives/3256)

[发表你的看法](https://kexue.fm/archives/9931#comment_form)

[局部余弦相似度大，全局余弦相似度一定也大吗？ R11; AI 資訊](https://news.aitime.space/2024/01/82032/)

January 10th, 2024

\[...\]​Read More \[...\]

[回复评论](https://kexue.fm/archives/9931/comment-page-1?replyTo=23495#respond-post-9931)

edward

January 10th, 2024

关于最后把辛普森悖论和余弦相似度联系起来有点疑惑

如果现在是比较两个向量的余弦相似度，例如\[x1,x2\],\[y1,y2\]，x1,x2各代表两个红球，y1,y2各代表两个蓝球，我理解局部和全局关系想说的是，\[x1,y1\]拟合曲线方向和\[x2,y2\]拟合曲线方向一致，但把他们合起来，\[x1,x2,y1,y2\]拟合的曲线是可能会不一样

但辛普森悖论更像说，同颜色球内部，\[x1,x2\]拟合方向和\[y1,y2\]拟合方向一致，但\[x1,x2,y1,y2\]拟合出不一致的方向，感觉和余弦相似度想表达的还是有区别？

[回复评论](https://kexue.fm/archives/9931/comment-page-1?replyTo=23496#respond-post-9931)

[苏剑林](https://kexue.fm) 发表于
January 16th, 2024

不是。两者的数学本质都是余弦相似度，所以能导出相近的结论，但两者的几何意义差很远。

第一个点，从局部向量和全局向量的角度看，比如局部向量是二维向量，这个可以画出来，但全局向量是四维，这个就没法画出来了，四维空间的图我们画不了，更高维的更加没法画了。所以第一个点所描述的现象，对于我们这只是生活在三维空间中的人来说，可能就纯粹是一个理论结果。

当然，这个事情可以类别一下投影，三维空间中的两个向量，从某个方向投影到平面可能就重合了（余弦相似度为1），然后另一个方向的投影可能是锐角（余弦相似度大于0），但三维空间中它们可能只是个直角（余弦相似度为0）。局部向量本质上也就是全局向量的投影。

第二个点，从数据的相关性角度看，第一点中的向量维数，变成了二维平面上的数据点的数量，不管多少个点，都可以画出来，原来的局部向量，变成了数据点的子集，全局向量也就是全集，这样才是可画的，并且很直观。

[回复评论](https://kexue.fm/archives/9931/comment-page-1?replyTo=23512#respond-post-9931)

ct 发表于
February 4th, 2024

相关系数怎么由余弦相似度的结论推导得到辛普森悖论？缺失过程显得逻辑很奇怪

[回复评论](https://kexue.fm/archives/9931/comment-page-1?replyTo=23664#respond-post-9931)

ct 发表于
February 4th, 2024

理解了一下苏神的意思，是不是公式（8）维度的含义和前文分析余弦相似度是相反的？在公式8中每个点才是维度，而x,y是两个向量，所以子空间（某4个点）的相似度不代表全体维度（所有点）的相似度

[回复评论](https://kexue.fm/archives/9931/comment-page-1?replyTo=23665#respond-post-9931)

[苏剑林](https://kexue.fm) 发表于
February 6th, 2024

是的。前面的向量维度，对应于后面的相关系数中的“样本点的数量”；而前面的$\\boldsymbol{x},\\boldsymbol{y}$两个向量的“两”，对应于后面相关系数中的样本点维度是“两”维。

[回复评论](https://kexue.fm/archives/9931/comment-page-1?replyTo=23679#respond-post-9931)

edward 发表于
April 11th, 2024

我也理解了，把汤普森悖论里四个样本点的四看作余弦相似度里的维度，每个样本点的xy看做两个向量，确实能get到了

[回复评论](https://kexue.fm/archives/9931/comment-page-1?replyTo=24117#respond-post-9931)

[取消回复](https://kexue.fm/archives/9931#respond-post-9931)

你的大名

电子邮箱

个人网站（选填）

1\. 可以使用LaTeX代码，点击“预览效果”可查看效果；2. 可以通过点击评论楼层编号来引用该楼层；3. 网站可能会有点卡，如非确认评论失败，请不要重复点击提交。

### 内容速览

[问题背景](https://kexue.fm/archives/9931#%E9%97%AE%E9%A2%98%E8%83%8C%E6%99%AF)
[简单分析](https://kexue.fm/archives/9931#%E7%AE%80%E5%8D%95%E5%88%86%E6%9E%90)
[相关悖论](https://kexue.fm/archives/9931#%E7%9B%B8%E5%85%B3%E6%82%96%E8%AE%BA)
[文章小结](https://kexue.fm/archives/9931#%E6%96%87%E7%AB%A0%E5%B0%8F%E7%BB%93)

### 智能搜索

支持整句搜索！网站自动使用 [结巴分词](https://github.com/fxsjy/jieba) 进行分词，并结合ngrams排序算法给出合理的搜索结果。

### 热门标签

[生成模型](https://kexue.fm/tag/%E7%94%9F%E6%88%90%E6%A8%A1%E5%9E%8B/) [attention](https://kexue.fm/tag/attention/) [优化](https://kexue.fm/tag/%E4%BC%98%E5%8C%96/) [语言模型](https://kexue.fm/tag/%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/) [模型](https://kexue.fm/tag/%E6%A8%A1%E5%9E%8B/) [网站](https://kexue.fm/tag/%E7%BD%91%E7%AB%99/) [概率](https://kexue.fm/tag/%E6%A6%82%E7%8E%87/) [梯度](https://kexue.fm/tag/%E6%A2%AF%E5%BA%A6/) [转载](https://kexue.fm/tag/%E8%BD%AC%E8%BD%BD/) [微分方程](https://kexue.fm/tag/%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B/) [矩阵](https://kexue.fm/tag/%E7%9F%A9%E9%98%B5/) [天象](https://kexue.fm/tag/%E5%A4%A9%E8%B1%A1/) [分析](https://kexue.fm/tag/%E5%88%86%E6%9E%90/) [深度学习](https://kexue.fm/tag/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/) [积分](https://kexue.fm/tag/%E7%A7%AF%E5%88%86/) [python](https://kexue.fm/tag/python/) [优化器](https://kexue.fm/tag/%E4%BC%98%E5%8C%96%E5%99%A8/) [力学](https://kexue.fm/tag/%E5%8A%9B%E5%AD%A6/) [无监督](https://kexue.fm/tag/%E6%97%A0%E7%9B%91%E7%9D%A3/) [扩散](https://kexue.fm/tag/%E6%89%A9%E6%95%A3/) [几何](https://kexue.fm/tag/%E5%87%A0%E4%BD%95/) [节日](https://kexue.fm/tag/%E8%8A%82%E6%97%A5/) [生活](https://kexue.fm/tag/%E7%94%9F%E6%B4%BB/) [文本生成](https://kexue.fm/tag/%E6%96%87%E6%9C%AC%E7%94%9F%E6%88%90/) [数论](https://kexue.fm/tag/%E6%95%B0%E8%AE%BA/)

### 随机文章

- [《量子力学与路径积分》习题解答V0.4](https://kexue.fm/archives/3582)
- [指数梯度下降 \+ 元学习 = 自适应学习率](https://kexue.fm/archives/8968)
- [分享一个slide：花式自然语言处理](https://kexue.fm/archives/4823)
- [一道概率不等式：盯着它到显然成立为止！](https://kexue.fm/archives/10902)
- [N体问题的30个周期性解](https://kexue.fm/archives/1123)
- [高考结束了](https://kexue.fm/archives/1613)
- [变分自编码器（二）：从贝叶斯观点出发](https://kexue.fm/archives/5343)
- [2012诺贝尔奖...](https://kexue.fm/archives/1735)
- [细水长flow之RealNVP与Glow：流模型的传承与升华](https://kexue.fm/archives/5807)
- [一篇费曼的介绍](https://kexue.fm/archives/1686)

### 最近评论

- [PengchengMa](https://kexue.fm/archives/10996/comment-page-1#comment-27811): 牛啊
- [xczh](https://kexue.fm/archives/10958/comment-page-1#comment-27810): 已使用mean flow policy，一步推理效果确实惊人，性能跟多步推理的diffusio...
- [Cosine](https://kexue.fm/archives/10945/comment-page-1#comment-27809): 是不是因为shared experts每次都激活，而routed experts是依概率被选中...
- [rpsun](https://kexue.fm/archives/10699/comment-page-1#comment-27808): 这样似乎与传统的经验正交函数之类的有相似之处。把样本的平均值减掉之后做正交分解。那么如果单纯地...
- [贵阳机场接机](https://kexue.fm/archives/1490/comment-page-1#comment-27807): 怎么不更新啦
- [czvzb](https://kexue.fm/archives/10958/comment-page-1#comment-27806): 具身智能模型目前主流也是在使用扩散和流匹配这类方法来预测动作。
苏神推荐你看这几篇文章：
1....
- [Shawn\_yang](https://kexue.fm/archives/10945/comment-page-1#comment-27802): 苏神，关于您所说的：“推理阶段可以事先预估Routed Expert的实际分布，只要细致地进行...
- [OceanYU](https://kexue.fm/archives/9164/comment-page-4#comment-27801): 您好，关于由式（7）推导出高斯分布，我这里有一点问题，式（7）只能保证关于x\_t-1是二次函数...
- [jorjiang](https://kexue.fm/archives/10907/comment-page-2#comment-27800): 训练和prefill这个compute-bound阶段不做矩阵吸收，这个用我这个解释更好理解了...
- [amy](https://kexue.fm/archives/10907/comment-page-2#comment-27799): 苏老师，您有关注傅里叶旋转位置编码这篇工作吗，想知道您对这篇工作的看法是什么，这篇工作可以wo...

### 友情链接

- [Cool Papers](https://papers.cool)
- [数学研发](https://bbs.emath.ac.cn)
- [Seatop](http://www.seatop.com.cn/)
- [Xiaoxia](https://xiaoxia.org/)
- [积分表-网络版](https://kexue.fm/sci/integral/index.html)
- [丝路博傲](http://blog.dvxj.com/)
- [ph4ntasy 饭特稀](http://www.ph4ntasy.com/)
- [数学之家](http://www.2math.cn/)
- [有趣天文奇观](http://interesting-sky.china-vo.org/)
- [TwistedW](http://www.twistedwg.com/)
- [godweiyang](https://godweiyang.com/)
- [AI柠檬](https://blog.ailemon.net/)
- [王登科-DK博客](https://greatdk.com)
- [ESON](https://blog.eson.org/)
- [枫之羽](https://fzhiy.net/)
- [Mathor's blog](https://wmathor.com/)
- [coding-zuo](https://coding-zuo.github.io/)
- [博科园](https://www.bokeyuan.net/)
- [孔皮皮的博客](https://www.kppkkp.top/)
- [运鹏的博客](https://yunpengtai.top/)
- [jiming.site](https://jiming.site/)
- [OmegaXYZ](https://www.omegaxyz.com/)
- [Blog by Eacls](https://www.eacls.top/)
- [EAI猩球](https://www.robotech.ink/)
- [文举的博客](https://liwenju0.com/)
- [用代码打点酱油](https://bruceyuan.com/)
- [申请链接](https://kexue.fm/links.html)

本站采用创作共用版权协议，要求署名、非商业用途和保持一致。转载本站内容必须也遵循“ [署名-非商业用途-保持一致](http://creativecommons.org/licenses/by-nc-nd/2.5/cn/)”的创作共用协议。
© 2009-2025 Scientific Spaces. All rights reserved. Theme by [laogui](http://www.laogui.com). Powered by [Typecho](http://typecho.org). 备案号: [粤ICP备09093259号-1/2](https://beian.miit.gov.cn/)。